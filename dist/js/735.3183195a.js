"use strict";(self["webpackChunkhonda_booking_online"]=self["webpackChunkhonda_booking_online"]||[]).push([[735],{7735:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var n=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("v-app",[n("v-app-bar",{attrs:{app:"",height:"80"}},[n("v-toolbar-title",[n("img",{staticClass:"mt-2 hidden-sm-and-down",attrs:{src:t(8294),height:"50px",contain:""}}),n("img",{staticClass:"mt-1 hidden-md-and-up",attrs:{src:t(8294),height:"20px",contain:""}})]),n("v-toolbar-title",[n("img",{staticClass:"mt-2 mx-3 hidden-sm-and-down",attrs:{src:t(6175),height:"50px",contain:""}}),n("img",{staticClass:"mt-1 mx-3 hidden-md-and-up",attrs:{src:t(6175),height:"30px",contain:""}})]),n("v-toolbar-title",{staticClass:"ml-4 hidden-sm-and-down"},[e._v("Booking Service ")]),n("v-toolbar-title",{staticClass:"ml-5 hidden-md-and-up"},[e._v("Booking Service")]),n("v-spacer"),n("v-toolbar-title",[e._v("Welcome, "),n("strong",[e._v(e._s(e.getUser()))]),e._v("! ")]),n("v-spacer"),n("v-btn",{attrs:{color:"error"},on:{click:e.logout}},[e._v("Logout")])],1),[n("v-data-iterator",{staticClass:"mx-7",attrs:{items:e.filteredData,"item-key":"kode_booking","items-per-page":e.itemsPerPage,page:e.page,search:e.search,"sort-by":e.sortBy.toLowerCase(),"sort-desc":e.sortDesc,"hide-default-footer":""},on:{"update:itemsPerPage":function(a){e.itemsPerPage=a},"update:items-per-page":function(a){e.itemsPerPage=a},"update:page":function(a){e.page=a}},scopedSlots:e._u([{key:"header",fn:function(){return[n("v-toolbar",{staticClass:"mb-4 mt-n7",attrs:{dark:"",color:"secondary"}},[n("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Cari ... "},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}}),n("v-spacer"),n("h3",{staticClass:"text",attrs:{"font-weight-medium":"","mb-5":""}},[e._v(e._s(e.getDealer()))]),e.$vuetify.breakpoint.mdAndUp?[n("v-spacer"),n("v-chip-group",{attrs:{column:""},model:{value:e.statusFilter,callback:function(a){e.statusFilter=a},expression:"statusFilter"}},[n("v-chip",{attrs:{color:"warning",filter:"",value:"New"}},[e._v(" New "),n("v-avatar",{directives:[{name:"show",rawName:"v-show",value:0!==e.countByNew,expression:"countByNew!==0"}],staticClass:"indigo darken-3",attrs:{right:""}},[e._v(e._s(e.countByNew))])],1),n("v-chip",{attrs:{color:"success",filter:"",value:"Confirmed"}},[e._v(" Confirmed "),n("v-avatar",{directives:[{name:"show",rawName:"v-show",value:0!==e.countByConfirmed,expression:"countByConfirmed!==0"}],staticClass:"indigo darken-3",attrs:{right:""}},[e._v(e._s(e.countByConfirmed))])],1),n("v-chip",{attrs:{color:"success",value:"Rescheduled & Confirmed",filter:""}},[e._v(" Rescheduled & Confirmed "),n("v-avatar",{directives:[{name:"show",rawName:"v-show",value:0!==e.countByRescheduleConfirmed,expression:"countByRescheduleConfirmed!==0"}],staticClass:"indigo darken-3",attrs:{right:""}},[e._v(e._s(e.countByRescheduleConfirmed))])],1),n("v-chip",{attrs:{color:"error",filter:"",value:"Cancelled"}},[e._v(" Cancelled "),n("v-avatar",{directives:[{name:"show",rawName:"v-show",value:0!==e.countByCancelled,expression:"countByCancelled!==0"}],staticClass:"indigo darken-3",attrs:{right:""}},[e._v(e._s(e.countByCancelled))])],1)],1),n("v-spacer"),n("v-btn-toggle",{attrs:{mandatory:""},model:{value:e.sortDesc,callback:function(a){e.sortDesc=a},expression:"sortDesc"}},[n("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!1}},[n("v-icon",[e._v("mdi-arrow-up")])],1),n("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!0}},[n("v-icon",[e._v("mdi-arrow-down")])],1)],1)]:e._e()],2)]},proxy:!0},{key:"default",fn:function(a){return[n("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],attrs:{flat:""}},[n("v-card-title",{staticClass:"justify-center"},[n("img",{attrs:{src:t(9728),contain:"",height:"150px"}})]),n("v-card-title",{staticClass:"justify-center"},[e._v(" Belum ada data ")])],1),n("v-row",e._l(a.items,(function(a){return n("v-col",{key:a.kode_booking,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("v-card",{directives:[{name:"show",rawName:"v-show",value:!1===e.isEmpty,expression:"isEmpty===false"}],style:e.isStatus(a)},[n("v-toolbar",{attrs:{color:"secondary",dark:""}},[n("v-chip",{attrs:{label:"",color:"blue-grey darken-1"}},[e._v(e._s(a.kode_booking))]),n("v-spacer"),"New"===a.status?n("span",[n("v-chip",{attrs:{color:"warning"}},[e._v(e._s(a.status))])],1):"Confirmed"===a.status||"Rescheduled & Confirmed"===a.status?n("span",[n("v-chip",{attrs:{color:"success"}},[e._v(e._s(a.status))])],1):"Cancelled"===a.status?n("span",[n("v-chip",{attrs:{color:"error"}},[e._v(e._s(a.status))])],1):e._e()],1),n("v-simple-table",{staticClass:"mb-2 mt-2"},[n("tr",[n("td",[n("strong",[e._v("Tanggal Booking")])]),n("td",[n("strong",[e._v("Tanggal Service")])])]),n("tr",[n("td",[n("v-chip",{attrs:{fill:""}},[e._v(e._s(e.formatTimezone(a.created_at)))])],1),n("td",[n("v-chip",{attrs:{fill:""}},[e._v(e._s(e.formatDate(a.tgl_service)))])],1)])]),n("v-divider"),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" Lihat Detail ")]),n("v-expansion-panel-content",[n("v-simple-table",{attrs:{dense:""}},[n("tbody",[n("tr",[n("td",[n("strong",[e._v("Nama Customer")])]),n("td",[e._v(e._s(a.nama_customer))])]),n("tr",{directives:[{name:"show",rawName:"v-show",value:""!==a.email_customer,expression:"item.email_customer!==''"}]},[n("td",[n("strong",[e._v("Email Customer")])]),n("td",[e._v(e._s(a.email_customer))])]),n("tr",[n("td",[n("strong",[e._v("No Handphone")])]),n("td",[e._v(e._s(a.no_handphone))])]),n("tr",[n("td",[n("strong",[e._v("No Polisi")])]),n("td",[n("v-chip",{attrs:{small:"",label:"",color:"black","text-color":"white"}},[n("strong",[e._v(e._s(a.no_polisi))])])],1)]),n("tr",[n("td",[n("strong",[e._v("Model Kendaraan")])]),n("td",e._l(e.kendaraan,(function(t){return n("span",{key:t.id_kendaraan},[t.id_kendaraan===a.id_kendaraan?n("span",[e._v(" "+e._s(t.model_kendaraan)+" ")]):e._e()])})),0)]),n("tr",[n("td",[n("strong",[e._v("Nomor Rangka")])]),null===a.no_rangka?n("td",[n("v-btn",{attrs:{"x-small":""},on:{click:function(t){return e.openImageDialog(a.no_rangka_image)}}},[e._v("Lihat Gambar")])],1):n("td",[e._v(" "+e._s(a.no_rangka)+" ")])]),n("tr",[n("td",[n("strong",[e._v("Dealer")])]),n("td",e._l(e.dealer,(function(t){return n("span",{key:t.id_dealer},[t.id_dealer===a.id_dealer?n("span",[e._v(" "+e._s(t.nama_dealer)+" ")]):e._e()])})),0)]),n("tr",[n("td",[n("strong",[e._v("Jenis Pekerjaan")])]),n("td",[e._v(e._s(a.jenis_pekerjaan))])]),n("tr",[n("td",[n("strong",[e._v("Jenis Layanan")])]),n("td",[e._v(e._s(a.jenis_layanan))])]),n("tr",[n("td",[n("strong",[e._v("Keterangan Customer")])]),n("td",[n("strong",[e._v("Keterangan CCO")])])]),n("tr",[n("td",[e._v(e._s(a.keterangan_customer))]),n("td",{directives:[{name:"show",rawName:"v-show",value:""!==a.keterangan_cco,expression:"item.keterangan_cco!==''"}]},[e._v(e._s(a.keterangan_cco)+" ")])])])])],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" Actions ")]),n("v-expansion-panel-content",[n("v-btn",{staticClass:"ma-2 white--text",attrs:{small:"",color:"blue-grey"},on:{click:function(t){return e.editDataHandler(a)}}},[e._v("Ubah Data "),n("v-icon",{attrs:{right:"",dark:""}},[e._v(" mdi-pencil ")])],1),n("v-btn",{staticClass:"ma-2 white--text",attrs:{small:"",color:"info"},on:{click:function(t){return e.editStatusHandler(a)}}},[e._v("Ubah Status "),n("v-icon",{attrs:{right:"",dark:""}},[e._v(" mdi-pencil ")])],1)],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" Log ")]),n("v-expansion-panel-content",[n("ul",e._l(e.logs,(function(t){return n("span",{key:t.detail_log},[t.kode_booking===a.kode_booking?n("span",[n("li",{staticClass:"text-left"},[e._v(e._s(t.detail_log))])]):e._e()])})),0)])],1)],1)],1)],1)})),1)]}},{key:"footer",fn:function(){return[n("v-toolbar",{staticClass:"mt-5",attrs:{color:"secondary",dark:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("span",{staticClass:"white--text"},[e._v("Â  Items per page")]),n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(a){var t=a.on,s=a.attrs;return[n("v-btn",e._g(e._b({staticClass:"ml-2",attrs:{dark:"",text:"",color:"white"}},"v-btn",s,!1),t),[e._v(" "+e._s(e.itemsPerPage)+" "),n("v-icon",[e._v("mdi-chevron-down")])],1)]}}])},[n("v-list",e._l(e.itemsPerPageArray,(function(a,t){return n("v-list-item",{key:t,on:{click:function(t){return e.updateItemsPerPage(a)}}},[n("v-list-item-title",[e._v(e._s(a))])],1)})),1)],1),n("v-spacer"),n("span",{staticClass:"mr-4\n                        grey--text"},[e._v(" Page "+e._s(e.page)+" of "+e._s(e.numberOfPages)+" ")]),n("v-btn",{staticClass:"mr-1",attrs:{text:"",dark:"",color:"white"},on:{click:e.formerPage}},[n("v-icon",[e._v("mdi-chevron-left")])],1),n("v-btn",{staticClass:"ml-1",attrs:{text:"",dark:"",color:"white"},on:{click:e.nextPage}},[n("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1)]},proxy:!0}])}),[n("v-dialog",{attrs:{"max-width":"auto","content-class":"open-image-dialog"},model:{value:e.imageDialog,callback:function(a){e.imageDialog=a},expression:"imageDialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"secondary",dark:""}},[n("h2",[e._v("Lihat Gambar")]),n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.close2}},[e._v("Close")])],1),n("v-img",{staticClass:"mx-auto",attrs:{src:e.url}})],1)],1)],[n("v-dialog",{attrs:{"max-width":"800","content-class":"edit-data-dialog"},model:{value:e.editDataDialog,callback:function(a){e.editDataDialog=a},expression:"editDataDialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"secondary",dark:""}},[n("h2",[e._v("Edit Data Booking")])]),n("v-form",{ref:"form",staticClass:"mx-5 my-5",model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[n("v-text-field",{attrs:{rules:e.namaRules,label:"Nama Lengkap",hint:"Contoh: John Doe","prepend-inner-icon":"mdi-account",outlined:""},model:{value:e.form.nama_customer,callback:function(a){e.$set(e.form,"nama_customer",a)},expression:"form.nama_customer"}}),n("v-text-field",{attrs:{label:"Alamat Email",hint:"Contoh: username@email.com","prepend-inner-icon":"mdi-email",outlined:""},model:{value:e.form.email_customer,callback:function(a){e.$set(e.form,"email_customer",a)},expression:"form.email_customer"}}),n("v-text-field",{attrs:{placeholder:"081234567890",rules:e.noHPRules,label:"Nomor Handphone",hint:"Contoh: 081234567890","prepend-inner-icon":"mdi-cellphone",outlined:""},model:{value:e.form.no_handphone,callback:function(a){e.$set(e.form,"no_handphone",a)},expression:"form.no_handphone"}}),n("v-text-field",{attrs:{placeholder:"AD 1234 HO",rules:e.noPolisiRules,label:"Nomor Polisi","prepend-inner-icon":"mdi-car-search",hint:"Contoh: AD 1234 HO",outlined:""},model:{value:e.form.no_polisi,callback:function(a){e.$set(e.form,"no_polisi",a)},expression:"form.no_polisi"}}),n("v-row",[n("v-col",{directives:[{name:"show",rawName:"v-show",value:null!==e.form.no_rangka_image,expression:"form.no_rangka_image!==null"}],attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{"prepend-inner-icon":"mdi-car",rules:e.kendaraanRules,label:"Model Kendaraan",items:e.kendaraan,"item-text":"model_kendaraan","item-value":"id_kendaraan",outlined:""},model:{value:e.form.model_kendaraan,callback:function(a){e.$set(e.form,"model_kendaraan",a)},expression:"form.model_kendaraan"}})],1),n("v-col",{directives:[{name:"show",rawName:"v-show",value:null===e.form.no_rangka_image,expression:"form.no_rangka_image===null"}],attrs:{cols:"12",md:"6"}},[n("v-autocomplete",{attrs:{"prepend-inner-icon":"mdi-car",rules:e.kendaraanRules,label:"Model Kendaraan",items:e.kendaraan,"item-text":"model_kendaraan","item-value":"id_kendaraan",outlined:""},model:{value:e.form.model_kendaraan,callback:function(a){e.$set(e.form,"model_kendaraan",a)},expression:"form.model_kendaraan"}})],1),n("v-col",{directives:[{name:"show",rawName:"v-show",value:null!==e.form.no_rangka_image,expression:"form.no_rangka_image!==null"}],attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Nomor Rangka/VIN","prepend-inner-icon":"mdi-car-search",outlined:""},model:{value:e.form.no_rangka,callback:function(a){e.$set(e.form,"no_rangka",a)},expression:"form.no_rangka"}})],1),n("v-col",{directives:[{name:"show",rawName:"v-show",value:null===e.form.no_rangka_image,expression:"form.no_rangka_image===null"}],attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Nomor Rangka/VIN","prepend-inner-icon":"mdi-car-search",outlined:""},model:{value:e.form.no_rangka,callback:function(a){e.$set(e.form,"no_rangka",a)},expression:"form.no_rangka"}})],1),n("v-col",{directives:[{name:"show",rawName:"v-show",value:null!==e.form.no_rangka_image,expression:"form.no_rangka_image!==null"}],attrs:{cols:"12",md:"2"}},[n("v-btn",{staticClass:"mt-2",on:{click:function(a){return e.openImageDialog(e.form.no_rangka_image)}}},[e._v(" Lihat Nomor Rangka ")])],1)],1),n("v-row",{staticClass:"mt-n7"},[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{"prepend-inner-icon":"mdi-map-marker",rules:e.dealerRules,label:"Dealer",outlined:"",items:e.dealer,"item-text":"nama_dealer","item-value":"id_dealer"},model:{value:e.form.nama_dealer,callback:function(a){e.$set(e.form,"nama_dealer",a)},expression:"form.nama_dealer"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{attrs:{"prepend-inner-icon":"mdi-tools",rules:e.jenisPekerjaanRules,label:"Jenis Pekerjaan",items:e.jenis_pekerjaan,"item-text":"jenis_pekerjaan","item-value":"jenis_pekerjaan",outlined:""},model:{value:e.form.jenis_pekerjaan,callback:function(a){e.$set(e.form,"jenis_pekerjaan",a)},expression:"form.jenis_pekerjaan"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:""===e.form.jenis_pekerjaan,expression:"form.jenis_pekerjaan===''"}],attrs:{label:"Jenis Layanan",disabled:"",outlined:""}}),"Authorized Workshop"===e.form.jenis_pekerjaan?n("span",[n("v-autocomplete",{attrs:{rules:e.jenisLayananRules,label:"Jenis Layanan",items:e.layanan_authorized_workshop,"item-text":"jenis_layanan","item-value":"jenis_layanan",outlined:""},model:{value:e.form.jenis_layanan,callback:function(a){e.$set(e.form,"jenis_layanan",a)},expression:"form.jenis_layanan"}})],1):"Home Service"===e.form.jenis_pekerjaan?n("span",[n("v-autocomplete",{attrs:{rules:e.jenisLayananRules,label:"Jenis Layanan",items:e.layanan_home_service,"item-text":"jenis_layanan","item-value":"jenis_layanan",outlined:""},model:{value:e.form.jenis_layanan,callback:function(a){e.$set(e.form,"jenis_layanan",a)},expression:"form.jenis_layanan"}})],1):e._e()],1)],1),n("v-row",{staticClass:"mt-n7"},[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"100%","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(a){var t=a.on,s=a.attrs;return[n("v-text-field",e._g(e._b({attrs:{"prepend-inner-icon":"mdi-calendar-range",rules:e.tglServiceRules,label:"Tanggal Service","persistent-hint":"",outlined:""},model:{value:e.form.tgl_service,callback:function(a){e.$set(e.form,"tgl_service",a)},expression:"form.tgl_service"}},"v-text-field",s,!1),t))]}}]),model:{value:e.menu1,callback:function(a){e.menu1=a},expression:"menu1"}},[n("v-date-picker",{attrs:{"no-title":"",min:new Date((new Date).valueOf()+864e5).toISOString().slice(0,10),locale:"id"},model:{value:e.form.tgl_service,callback:function(a){e.$set(e.form,"tgl_service",a)},expression:"form.tgl_service"}})],1)],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-autocomplete",{attrs:{"prepend-inner-icon":"mdi-clock-time-eight",rules:e.jamServiceRules,label:"Jam Service",items:e.jam_service,"item-text":"name","item-value":"name",outlined:""},model:{value:e.form.jam_service,callback:function(a){e.$set(e.form,"jam_service",a)},expression:"form.jam_service"}})],1)],1),n("v-textarea",{attrs:{"prepend-inner-icon":"mdi-pencil-box-multiple",outlined:"",label:"Pesan/Keluhan",hint:"Sampaikan pesan atau keluhan yang ingin Anda sampaikan"},model:{value:e.form.keterangan_customer,callback:function(a){e.$set(e.form,"keterangan_customer",a)},expression:"form.keterangan_customer"}})],1),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:"",color:"error"},on:{click:e.close}},[e._v("Tutup")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.save}},[e._v("Simpan")])],1)],1)],1)],[n("v-dialog",{attrs:{"max-width":"600","content-class":"edit-status-dialog"},model:{value:e.editStatusDialog,callback:function(a){e.editStatusDialog=a},expression:"editStatusDialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"secondary",dark:""}},[n("h2",[e._v("Edit Status Booking")])]),n("v-form",{ref:"form1",staticClass:"mx-5 my-5",model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[n("v-chip-group",{attrs:{column:""},model:{value:e.form.status,callback:function(a){e.$set(e.form,"status",a)},expression:"form.status"}},[n("v-chip",{attrs:{color:"warning",filter:"",value:"New"}},[e._v(" New ")]),n("v-chip",{attrs:{color:"success",filter:"",value:"Confirmed"}},[e._v(" Confirmed ")]),n("v-chip",{attrs:{color:"success",value:"Rescheduled & Confirmed",filter:""}},[e._v(" Rescheduled & Confirmed ")]),n("v-chip",{attrs:{color:"error",filter:"",value:"Cancelled"}},[e._v(" Cancelled ")])],1),n("v-textarea",{attrs:{"prepend-inner-icon":"mdi-pencil-box-multiple",outlined:"",label:"Keterangan CCO"},model:{value:e.form.keterangan_cco,callback:function(a){e.$set(e.form,"keterangan_cco",a)},expression:"form.keterangan_cco"}})],1),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:""},on:{click:e.close1}},[e._v("Close")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.saveStatus}},[e._v("Simpan")])],1)],1)],1)]],n("v-snackbar",{attrs:{elevation:"24",color:e.color,timeout:"4000",bottom:""},scopedSlots:e._u([{key:"action",fn:function(a){var t=a.attrs;return[n("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(a){e.snackbar=!1}}},"v-btn",t,!1),[e._v(" Close")])]}}]),model:{value:e.snackbar,callback:function(a){e.snackbar=a},expression:"snackbar"}},[n("v-layout",{attrs:{"align-center":"","pr-4":""}},[n("v-icon",{staticClass:"pr-3",attrs:{dark:"",large:""}},[e._v(e._s(e.icon_message))]),n("v-layout",{attrs:{column:""}},[n("div",[n("strong",[e._v(e._s(e.title_message))])]),n("div",e._l(e.error_message,(function(a,t){return n("div",{key:t},e._l(a,(function(a,t){return n("div",{key:t},[e._v(" "+e._s(a)+" ")])})),0)})),0)])],1)],1),n("v-snackbar",{attrs:{elevation:"24",color:e.color,dark:"",timeout:"4000"},scopedSlots:e._u([{key:"action",fn:function(a){var t=a.attrs;return[n("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(a){e.snackbar1=!1}}},"v-btn",t,!1),[e._v(" Close")])]}}]),model:{value:e.snackbar1,callback:function(a){e.snackbar1=a},expression:"snackbar1"}},[n("v-layout",{attrs:{"align-center":"","pr-4":""}},[n("v-icon",{staticClass:"pr-3",attrs:{dark:"",large:""}},[e._v(e._s(e.icon_message))]),n("v-layout",{attrs:{column:""}},[n("div",[n("strong",[e._v(e._s(e.title_message))])]),n("div",[e._v(e._s(e.response_message))])])],1)],1),n("v-snackbar",{attrs:{elevation:"24",color:"secondary",dark:""},model:{value:e.snackbar3,callback:function(a){e.snackbar3=a},expression:"snackbar3"}},[n("v-layout",{attrs:{"align-center":"","pr-4":""}},[n("v-icon",{staticClass:"pr-3",attrs:{dark:"",large:""}},[e._v("mdi-timer-sand-empty")]),n("v-layout",{attrs:{column:""}},[n("div",[n("strong",[e._v("Loading . . .")])]),n("div",[e._v("Mohon tunggu")])])],1)],1),n("v-overlay",{attrs:{opacity:.5,value:e.overlay}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"86"}},[e._v(" Loading... ")])],1)],2)},s=[],r=t(2864),o=t.n(r),i={name:"BookingDashboard",data(){return{isEmpty:!0,tab:null,snackbar:!1,snackbar1:!1,snackbar3:!1,editId:"",editDataDialog:!1,editStatusDialog:!1,imageDialog:!1,icon_message:"",title_message:"",error_message:"",response_message:"",dialog:!0,search:"",logs:[],filter:[],sortDesc:!0,overlay:!0,page:1,itemsPerPage:15,itemsPerPageArray:[15,30,50],sortBy:"created_at",statusFilter:"",interval:null,valid:!1,menu1:!1,url:null,color:"",keys:["Tanggal Service","Tanggal Booking","Status"],bookings:[{kode_booking:"",nama_customer:"",email_customer:"",no_handphone:"",no_polisi:"",model_kendaraan:"",no_rangka:"",nama_dealer:"",tgl_service:"",jenis_pekerjaan:"",jenis_layanan:"",keterangan_customer:"",keterangan_cco:"",status:"",created_at:""}],updateBooking:new FormData,form:{nama_customer:"",email_customer:"",no_handphone:"",no_polisi:"",model_kendaraan:"",no_rangka:"",nama_dealer:"",tgl_service:"",jam_service:"",jenis_pekerjaan:"",jenis_layanan:"",keterangan_customer:"",keterangan_cco:"",status:"",no_rangka_image:""},kendaraan:[{id_kendaraan:"",model_kendaraan:""}],dealer:[{id_dealer:"",nama_dealer:""}],jenis_pekerjaan:[{jenis_pekerjaan:"Authorized Workshop"},{jenis_pekerjaan:"Home Service"}],layanan_authorized_workshop:[{jenis_layanan:"General Service (Perawatan Berkala)"},{jenis_layanan:"Body Repair (Perbaikan Bodi Mobil)"},{jenis_layanan:"Quick Maintenance"}],layanan_home_service:[{jenis_layanan:"Home Service"}],jam_service:[{name:"08:00"},{name:"08:30"},{name:"09:00"},{name:"09:30"},{name:"10:00"},{name:"10:30"},{name:"11:00"},{name:"11:30"},{name:"12:00"},{name:"12:30"},{name:"13:00"},{name:"13:30"},{name:"14:00"}],status_booking:[{name:"New"},{name:"Confirmed"},{name:"Rescheduled & Confirmed"},{name:"Cancelled"}],namaRules:[e=>!!e||"Nama lengkap harus diisi"],noHPRules:[e=>!!e||"Nomor handphone harus diisi",e=>/^(\+62|62|0)8[1-9][0-9]{6,10}$/.test(e)||"Nomor handphone invalid"],noPolisiRules:[e=>!!e||"Nomor polisi harus diisi",e=>/^[A-Za-z]{1,2}\s{1}\d{0,4}\s{0,1}[A-Za-z]{0,3}$/.test(e)||"Nomor polisi tidak sesuai format. Contoh: AD 1234 HO"],kendaraanRules:[e=>!!e||"Model kendaraan harus diisi"],noRangkaRules:[e=>!!e||"Nomor rangka harus diisi"],dealerRules:[e=>!!e||"Dealer harus diisi"],tglServiceRules:[e=>!!e||"Tanggal service harus diisi"],jamServiceRules:[e=>!!e||"Jam service harus diisi"],jenisPekerjaanRules:[e=>!!e||"Jenis pekerjaan harus diisi"],jenisLayananRules:[e=>!!e||"Jenis layanan harus diisi"],statusRules:[e=>!!e||"Status harus dipilih"]}},computed:{filteredData(){return this.bookings.filter((e=>!this.statusFilter||e.status===this.statusFilter))},countByNew(){localStorage.getItem("dealer");return this.bookings.filter((e=>"New"===e.status&&e.id_dealer==localStorage.getItem("dealer"))).length},countByConfirmed(){return this.bookings.filter((e=>"Confirmed"===e.status&&e.id_dealer==localStorage.getItem("dealer"))).length},countByRescheduleConfirmed(){return this.bookings.filter((e=>"Rescheduled & Confirmed"===e.status&&e.id_dealer==localStorage.getItem("dealer"))).length},countByCancelled(){return this.bookings.filter((e=>"Cancelled"===e.status&&e.id_dealer==localStorage.getItem("dealer"))).length},numberOfPages(){return Math.ceil(this.filteredData.length/this.itemsPerPage)}},methods:{openImageDialog(e){this.imageDialog=!0,this.url="https://be.bintang-group.co.id/storage/no_rangka_image/"+e},logout(){localStorage.removeItem("nama"),localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("dealer"),localStorage.removeItem("nama_dealer"),this.$router.push({name:"AdminLogin"})},readData(){var e=this.$api+"/booking-filtered/"+localStorage.getItem("dealer");this.$http.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.bookings=e.data.data,this.isEmpty=!1})).catch((e=>{this.isEmpty=!0}))},getBookingLog(){var e=this.$api+"/booking-log";this.$http.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.logs=e.data.data}))},getDataKendaraan(){var e=this.$api+"/kendaraan";this.$http.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.kendaraan=e.data.data}))},getDataDealer(){var e=this.$api+"/dealer";this.$http.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.dealer=e.data.data}))},getUser(){return localStorage.getItem("nama")},getDealer(){return localStorage.getItem("nama_dealer")},editDataHandler(e){this.editId=e.kode_booking,this.form.nama_customer=e.nama_customer,this.form.email_customer=e.email_customer,this.form.no_handphone=e.no_handphone,this.form.no_polisi=e.no_polisi,this.form.model_kendaraan=e.id_kendaraan,this.form.no_rangka=e.no_rangka,this.form.nama_dealer=e.id_dealer,this.form.tgl_service=e.tgl_service.substring(0,10),this.form.jam_service=e.tgl_service.substring(11,16),this.form.jenis_pekerjaan=e.jenis_pekerjaan,this.form.no_rangka_image=e.no_rangka_image,this.form.jenis_layanan=e.jenis_layanan,this.form.keterangan_customer=e.keterangan_customer,this.url="https://be.bintang-group.co.id/storage/no_rangka_image/"+e.no_rangka_image,this.editDataDialog=!0},editStatusHandler(e){this.editId=e.kode_booking,this.form.keterangan_cco=e.keterangan_cco,this.form.status=e.status,this.editStatusDialog=!0},save(){if(this.$refs.form.validate()){this.snackbar3=!0,null===this.form.email_customer?this.updateBooking.append("email_customer",""):this.updateBooking.append("email_customer",this.form.email_customer),null===this.form.no_rangka?this.updateBooking.append("no_rangka",""):this.updateBooking.append("no_rangka",this.form.no_rangka),this.updateBooking.append("nama_customer",this.form.nama_customer),this.updateBooking.append("no_handphone",this.form.no_handphone),this.updateBooking.append("no_polisi",this.form.no_polisi),this.updateBooking.append("id_dealer",this.form.nama_dealer),this.updateBooking.append("id_kendaraan",this.form.model_kendaraan);var e=this.form.tgl_service+" "+this.form.jam_service;this.updateBooking.append("tgl_service",e),this.updateBooking.append("jenis_pekerjaan",this.form.jenis_pekerjaan),this.updateBooking.append("jenis_layanan",this.form.jenis_layanan),this.updateBooking.append("keterangan_customer",this.form.keterangan_customer);var a=this.$api+"/booking/"+this.editId;this.$http.post(a,this.updateBooking,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.response_message=e.data.message,this.color="blue-grey darken-1",this.snackbar1=!0,this.snackbar3=!1,this.icon_message="mdi-check-decagram",this.title_message="Success",this.editDataDialog=!1,this.readData()})).catch((e=>{this.error_message=e.response.data.message,this.color="warning",this.snackbar=!0,this.icon_message="mdi-alert-decagram",this.title_message="Error"}))}},saveStatus(){if(this.$refs.form1.validate())if(this.snackbar3=!0,null===this.form.keterangan_cco){this.updateBooking.append("status",this.form.status),this.updateBooking.append("keterangan_cco","");var e=this.$api+"/booking-status/"+this.editId;this.$http.post(e,this.updateBooking,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.response_message=e.data.message,this.color="blue-grey darken-1",this.snackbar1=!0,this.snackbar3=!1,this.icon_message="mdi-check-decagram",this.title_message="Success",this.editStatusDialog=!1,this.readData()})).catch((e=>{this.error_message=e.response.data.message,this.color="warning",this.snackbar=!0,this.icon_message="mdi-alert-decagram",this.title_message="Error"}))}else{this.updateBooking.append("status",this.form.status),this.updateBooking.append("keterangan_cco",this.form.keterangan_cco);e=this.$api+"/booking-status/"+this.editId;this.$http.post(e,this.updateBooking,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.response_message=e.data.message,this.color="blue-grey darken-1",this.snackbar1=!0,this.snackbar3=!1,this.icon_message="mdi-check-decagram",this.title_message="Success",this.editStatusDialog=!1,this.readData()})).catch((e=>{this.error_message=e.response.data.message,this.color="warning",this.snackbar=!0,this.icon_message="mdi-alert-decagram",this.title_message="Error"}))}},formatDate(e){return o()(String(e)).locale("id").format("dddd, DD MMMM YYYY HH:mm")},formatTimezone(e){return o()(e).tz("Asia/Jakarta").locale("id").format("dddd, DD MMMM YYYY HH:mm")},nextPage(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage(e){this.itemsPerPage=e},isStatus(e){return"Confirmed"===e.status||"Rescheduled & Confirmed"===e.status?"border:3px solid #4CAF50":"New"===e.status?"border: 3px solid #FFC107":"Cancelled"===e.status?"border: 3px solid #FF5252":void 0},close(){this.editDataDialog=!1,this.$refs.form.reset()},close1(){this.editStatusDialog=!1,this.$refs.form.reset()},close2(){this.imageDialog=!1}},mounted(){this.readData(),this.getBookingLog(),this.getDataKendaraan(),this.getDataDealer(),this.overlay=!1},created(){this.interval=setInterval(this.readData,5e3),this.interval1=setInterval(this.getBookingLog,5e3)},beforeDestroy(){clearInterval(this.interval),clearInterval(this.interval1)}},l=i,c=t(1001),d=(0,c.Z)(l,n,s,!1,null,null,null),m=d.exports},9728:function(e,a,t){e.exports=t.p+"img/no-data.35c194cc.png"}}]);
//# sourceMappingURL=735.3183195a.js.map